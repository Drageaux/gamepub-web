<div *ngIf="project$ | async as project">
  <!-- TODO: Breadcrumb Title -->
  <header class="p-2 p-md-0">
    <h1>{{ project.displayName || project.name }}</h1>
    <h2 class="lead">
      <a [href]="'https://github.com/' + project.githubRepo" target="_blank">
        <span class="fw-normal">{{ project.githubRepo }}</span>
      </a>
    </h2>
  </header>

  <ul class="nav nav-tabs">
    <li class="nav-item">
      <button
        class="nav-link"
        [class.active]="tab == 'Overview'"
        (click)="tab = 'Overview'"
      >
        Overview
      </button>
    </li>
    <li class="nav-item">
      <button
        class="nav-link"
        [class.active]="tab == 'Details'"
        (click)="tab = 'Details'"
      >
        Details
      </button>
    </li>
  </ul>

  <router-outlet></router-outlet>

  <app-project-overview
    *ngIf="tab == 'Overview'"
    [project]="project"
    (imageUpdatedEvent)="onProjectChange($event)"
  ></app-project-overview>

  <!-- "async" pipe only subscribes to the githubContents$ observable when Details tab is selected -->
  <ng-container *ngIf="tab == 'Details'">
    hey
    <app-project-tree
      *ngIf="githubContents$ | async as contents"
      [contents]="contents"
    ></app-project-tree>

    <app-package-listing
      *ngIf="manifest$ | async as manifest"
      [manifest]="manifest"
    ></app-package-listing>
  </ng-container>
</div>
