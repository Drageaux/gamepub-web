<div class="container">
  <!-- <app-job-card *ngFor="let j of jobs" [job]="j"></app-job-card> -->
  <div class="d-flex flex-row justify-content-between mb-3">
    <h2 class="float-start m-0">Jobs</h2>
    <button
      class="btn btn-primary float-end"
      [routerLink]="['./', newJobLink]"
      *ngIf="isCreator()"
    >
      <i class="fas fa-plus"></i>&nbsp;New Job
    </button>
  </div>
  <hr />
  <table class="table table-hover table-bordered">
    <thead></thead>
    <tbody>
      <tr *ngFor="let j of jobs; let i = index">
        <td class="position-relative">
          <h6 class="m-0">
            <a
              [routerLink]="['./', j.jobNumber]"
              class="d-inline d-md-none stretched-link"
            >
              {{ j.title }}
            </a>
            <a [routerLink]="['./', j.jobNumber]" class="d-none d-md-inline">
              {{ j.title }}
            </a>
            <!-- Comments Count -->
            <small *ngIf="j.commentsCount" class="float-end d-none d-sm-inline">
              <i class="far fa-comment-alt"></i>
              {{ j.commentsCount || 0 }}
            </small>
          </h6>

          <small class="text-muted">
            <!-- Job Number -->
            <span> #{{ j.jobNumber }} posted {{ j.createdAt | dateAgo }} </span>
            <!-- Collaborators (Job Takers) Count -->
            <span *ngIf="j.collaboratorsCount"
              >&bull;&nbsp;{{ j.collaboratorsCount }} collab{{
                j.collaboratorsCount !== 1 ? "s" : ""
              }}</span
            >
            <!-- Submissions Count -->
            <span *ngIf="j.submissionsCount">
              &bull;&nbsp;{{ j.acceptedSubmissionsCount || 0 }} out of
              {{ j.submissionsCount }} submissions accepted
            </span>
          </small>
        </td>

        <td class="d-none d-md-table-cell" *ngIf="currUsername">
          <app-job-subscription-buttons
            [job]="j"
            [isCreator]="isCreator()"
            (jobUpdatedEvent)="updateJob($event, i)"
          ></app-job-subscription-buttons>
        </td>
      </tr>
    </tbody>
  </table>
</div>
