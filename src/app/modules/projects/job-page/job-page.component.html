<div class="container" *ngIf="job">
  <!-- Header -->
  <div class="d-flex flex-row justify-content-between mb-3">
    <h2 class="m-0">
      {{ job.title }}&nbsp;<span class="text-muted fw-normal"
        >#{{ job.jobNumber }}</span
      >
    </h2>
    <!-- <a [routerLink]="['../', newJobLink]"
    ><button class="btn btn-primary">New Job</button></a
    > -->
  </div>
  <hr />

  <div class="row">
    <div class="col-12 col-sm-4 col-md-3 mb-5 position-relative">
      <div class="card sticky-top" [style]="{ top: '1rem' }">
        <nav class="nav nav-pills flex-column">
          <a
            class="nav-link"
            aria-current="page"
            [routerLink]="['./']"
            [routerLinkActive]="'active'"
            [routerLinkActiveOptions]="{ exact: true }"
            ><h6 class="m-0">
              Comments
              <span class="badge bg-secondary">{{ job?.commentsCount }}</span>
            </h6></a
          >
          <ul class="p-0">
            <a
              class="nav-link"
              [routerLink]="['./', submissionsLink]"
              [routerLinkActive]="'active'"
              ><h6 class="m-0">
                Submissions
                <span class="badge bg-secondary">{{
                  submissions?.length || 0
                }}</span>
              </h6></a
            >
            <ul
              *ngIf="submissions"
              class="ps-3"
              [style]="{ listStyle: 'none' }"
            >
              <li
                *ngFor="
                  let s of submissions
                    | slice: 0:submissionsLimit
                    | sort: 'submissionNumber'
                "
              >
                <!-- <a
                target="_blank"
                [href]="'https://www.github.com/' + s.githubRepo"
                >{{ s.githubRepo }}</a
              > -->
                <a
                  [routerLink]="['./', submissionsLink, s.submissionNumber]"
                  [routerLinkActive]="'fw-bold'"
                  >#{{ s.submissionNumber }} by {{ s.user }}</a
                >
              </li>

              <a
                *ngIf="submissionsLimit < submissions.length"
                (click)="submissionsLimit = submissionsLimit + 5"
                ><b>See more</b></a
              >
            </ul>
          </ul>
        </nav>

        <!-- <div class="card text-left"> -->
        <div class="card-body">
          <h5>Got your own submission?</h5>
          <p class="card-text">Send it to the job creator.</p>
          <a [routerLink]="['./', 'submit']" class="btn btn-success"
            >Submission Page</a
          >
        </div>
        <!-- </div> -->
      </div>
    </div>

    <div class="col-12 col-sm-8 col-md-9">
      <router-outlet></router-outlet>
    </div>
  </div>
</div>
